title CacheServer health checking
control CacheServerHealthChecker
database BuildStore

activate CacheServerHealthChecker
activate BuildStore
loop every n seconds
  CacheServerHealthChecker -> BuildStore: get all Dependencies objects "d" with lease not null
  loop for each dependencies in d
    opt dependencies.lease - now() > threshold
      CacheServerHealthChecker -> BuildStore: reset the lease of the Dependencies object
      CacheServerHealthChecker -> BuildStore: enqueue the Dependencies object id in the BuildStore
    end
  end
end
deactivate BuildStore
deactivate CacheServerHealthChecker